name: AI PR Reviewer

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  review:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write

    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: AI Review
        uses: google-github-actions/run-gemini-cli@v1
        with:
          prompt: |
            Jesteś Principal Engineerem recenzującym PR w projekcie ADHD HUB.
            Przeanalizuj diff i skup się na:
            1. Zgodności ze standardami (Google TypeScript Style Guide).
            2. Jakości testów (czy dodano testy dla nowej logiki?).
            3. Sensory Friendly UI (czy zmiany nie wprowadzają zbędnego szumu?).
            4. Poprawności ActionResult pattern.
            
            Zwróć zwięzłą recenzję w formacie Markdown z podziałem na "Co wygląda dobrze" i "Potencjalne problemy".
          gemini-api-key: ${{ secrets.GEMINI_API_KEY }}
